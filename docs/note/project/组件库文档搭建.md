---
category: project
cover: https://cdn.pixabay.com/photo/2023/10/27/12/13/vineyard-8345243_640.jpg
---

# 组件库文档搭建

接上回我们搭建完组件库项目，现在还剩下组建文档，因为从 0 开始搭建文档太费时间，我推荐大家使用[vitepress](https://vitepress.dev/zh/)进行快速搭建，它可以将你的 Markdown 转为文档页面，所以我们只需要写 md 文件既可快速实现文档开发。它自带了很多样式，如果你不喜欢，可以自定义主题，自定义主题的东西比较多，你也可以查询官网相关文档进行学习。

## 文档目录结构创建

上节我们在根目录下创建了一个 `docs` 的文件夹，我们接下来需要在这个文件夹下创建我们的组件库文档的项目。

我们在 `docs` 目录下打开终端，输入以下命令:

```bash
npx vitepress init
```

一直往下进行，你就会得到这样的文件结构：

![](http://tuchuang.niubin.site/image/project-20240812-1.png)

我们在组件库根目录下安装一下 `vitepress` 依赖

```bash
pnpm i vitepress -D -w
```

然后我们需要在根目录`package.json`中添加一下 `vitepress` 项目运行命令：

```json
{
  "name": "test-ui",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "dev": "vite examples",
    "test": "echo \"Error: no test specified\" && exit 1",
    "docs:dev": "vitepress dev", // 文档dev环境运行
    "docs:build": "vitepress build", // 文档打包
    "docs:preview": "vitepress preview" // 文档预览
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "@test-ui/components": "workspace:^",
    "@test-ui/examples": "workspace:^"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.1.2",
    "vite": "^5.3.5",
    "vitepress": "^1.3.2"
  }
}
```

执行运行命令，运行看一下是否能正常启动

```bash
npm run docs:dev
```

![](http://tuchuang.niubin.site/image/project-20240812-2.png)

这就表明已经成功运行了，说一下重点的文件

```
├─ docs
│  ├─ .vitepress
│  │  └─ config.js
│  ├─ api-examples.md
│  ├─ markdown-examples.md
│  └─ index.md
└─ package.json
```

，接下来我们需要导入我们组建进行注册。

## 组件的注册以及使用

要在组件库中显示出组件，我们必须得将我们开发的组件库安装到这个 vitepress 项目中，那我们怎么去安装呢？我们可以通过[自定义主题](https://vitepress.dev/zh/guide/custom-theme)来对当前的项目进行安装任何包，包括我们的组件库。

根据官网所说，我们需要在`.vitepress`文件夹下创建一个 `theme` 文件夹，在该文件夹下创建一个 `index.js` 或者 `index.ts` 文件作为主题入口文件。

```
.
├─ docs                # 项目根目录
│  ├─ .vitepress
│  │  ├─ theme
│  │  │  └─ index.js   # 主题入口
│  │  └─ config.js     # 配置文件
│  └─ index.md
└─ package.json
```

写入以下内容：

```ts
import DefaultTheme from "vitepress/theme";
import TestUI from "@test-ui/components";

export default {
  ...DefaultTheme,
  enhanceApp: async ({ app, router, siteData }) => {
    app.use(TestUI);
  },
};
```

`enhanceApp` 对应的函数入参中 `app` 代表当前 vue 实例，意味着我们可以使用它进行注册组件、定义指令等等。

我们清空一下默认带的`markdown-examples.md`，直接写入我们的组件，看看是否成功渲染。

![](http://tuchuang.niubin.site/image/project-20240812-3.png)

好耶 🎉 看来是已经成功渲染了，由于 vitepress 有默认的样式，我们的 button 样式已经被重置了，我们修改一下组件样式来看看

> 目前我用的是 less 预编译器，这个可以根据个人喜好来选择你的组件库 css 预编译器
> 根目录下安装 pnpm i less less-loader -D -w
> 在 `theme-chalk` 文件夹下创建 `index.less` 文件作为组件库样式入口文件，后续我们编写组件的时候再具体划分结构

我们在 `theme-chalk` 下 `index.less` 文件中修改一下我们的 button 组件样式，并在文档注册我们组件的地方导入我们组件的样式文件。

```css
.t-button {
  display: inline-block;
  border: 1px solid #ddd;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 14px;
  background-color: #409eff;
  color: #fff;
}
```

```ts
import DefaultTheme from "vitepress/theme";
import TestUI from "@test-ui/components";
import "@test-ui/theme-chalk/index.less"; // 引入样式文件

export default {
  ...DefaultTheme,
  enhanceApp: async ({ app, router, siteData }) => {
    app.use(TestUI);
  },
};
```

结果如下：

![](http://tuchuang.niubin.site/image/project-20240812-4.png)

## 组件源码预览
