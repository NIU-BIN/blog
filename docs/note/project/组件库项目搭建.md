---
category: project
cover: https://cdn.pixabay.com/photo/2016/05/22/19/48/sunrise-1409090_640.jpg
---

# ç»„ä»¶åº“é¡¹ç›®æ­å»º

åœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬å…ˆæ¥æ‹ä¸€ä¸‹æˆ‘ä»¬éœ€è¦è¿™ä¸ªé¡¹ç›®ä¸­æœ‰å“ªäº›ä¸œè¥¿ã€‚

- `ç»„ä»¶`ï¼šè‚¯å®šé¦–å…ˆæƒ³åˆ°çš„æ˜¯è¦å¼€å‘çš„ç»„ä»¶çš„ä»£ç 
- `é¢„è§ˆ`ï¼šæˆ‘ä»¬å¼€å‘çš„ç»„ä»¶è¦æœ‰åœ°æ–¹å¯ä»¥é¢„è§ˆï¼Œè¾¹å¼€å‘è¾¹æŸ¥çœ‹æ•ˆæœ
- `æ–‡æ¡£`ï¼šæˆ‘ä»¬éœ€è¦æ’°å†™ç»„ä»¶çš„å±æ€§ã€æ–¹æ³•ç­‰ç›¸å…³ç¤ºä¾‹è¯´æ˜ä»¥åŠä½¿ç”¨è¯´æ˜

ä¸»è¦åˆ†ä¸ºè¿™ä¸‰ä¸ªæ¨¡å—ï¼Œç»„ä»¶æˆ‘ä»¬åŸºäº `Vue3` è¿›è¡Œå¼€å‘ã€‚é¢„è§ˆçš„æ¨¡å—åšæˆä¸€ä¸ªç®€å•çš„ Vue3 é¡¹ç›®ï¼Œå°†æˆ‘ä»¬å¼€å‘çš„ç»„ä»¶æ³¨å†Œåˆ°ä¸Šé¢å»è¿›è¡Œé¢„è§ˆã€‚ç»„ä»¶çš„æ–‡æ¡£å‘¢æˆ‘æ›´æ¨èä½¿ç”¨ `vitepress` è¿›è¡Œæ­å»ºï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬æ›´å¿«çš„æ­å»ºå‡ºç»„ä»¶åº“æ–‡æ¡£ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªæ–‡æ¡£çš„é¡¹ç›®ï¼Œè¿™ä¸ªå°±æ ¹æ®ä¸ªäººå–œå¥½äº†ã€‚

åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬å¼€å§‹ã€‚

## åˆ›å»ºé¡¹ç›®ä»¥åŠåˆå§‹åŒ–

æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä¸ºè‡ªå·±ç»„ä»¶åº“çš„åç§°ï¼Œæ¯”å¦‚ XXX-UI ä¹‹ç±»çš„ï¼Œç„¶ååˆå§‹åŒ–ä¸€ä¸ª `package.json` æ–‡ä»¶

```bash
npm init -y
```

åˆ›å»º `packages`ã€`examples`ã€`docs` æ–‡ä»¶å¤¹åˆ†åˆ«ä½œä¸ºç»„ä»¶æ¨¡å—ã€ç¤ºä¾‹æ¨¡å—ã€æ–‡æ¡£æ¨¡å—ï¼Œåœ¨ä¸­åˆ†åˆ«åˆ›å»º`components`ã€`theme-chalk`ã€`utils`ä¸‰ä¸ªæ–‡ä»¶å¤¹åˆ’åˆ†ä¸ºç»„ä»¶ä»£ç ã€ç»„ä»¶æ ·å¼ã€å…¬å…±æ–¹æ³•ã€‚

è¿˜è®°å¾—ä¹‹å‰è®²è¿‡çš„å‰ç«¯ [Monorepo æ¶æ„](http://niubin.site/note/project/Monorepo%E6%9E%B6%E6%9E%84.html)å—ï¼Ÿ

åœ¨è¿™ä¸ªä»“åº“ä¸­æˆ‘ä»¬æœ‰ä¸‰ä¸ªé¡¹ç›®ï¼Œå„è‡ªä¹‹å‰æœ‰ä¸€äº›ç›¸åŒçš„ä¾èµ–ï¼Œæ¯”å¦‚ Vue3ï¼Œè¿˜æœ‰åœ¨æ–‡æ¡£å’Œç¤ºä¾‹ä¸­æˆ‘ä»¬éœ€è¦å¯¼å…¥æˆ‘ä»¬å¼€å‘çš„ Vue ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åšä¸€ä¸‹å·¥ä½œç©ºé—´ã€‚

## è®¾ç½®å·¥ä½œç©ºé—´

æˆ‘ä»¬åœ¨`examples`ã€`components`ã€`theme-chalk`ã€`utils`è¿™å‡ ä¸ªæ–‡ä»¶å¤¹ä¸‹åˆå§‹åŒ– `package.json` æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¸­çš„ `name` å­—æ®µåˆ†åˆ«ä¿®æ”¹ä¸º `@XXXX/examples`ã€`@XXXX/components`ã€`@XXXX/theme-chalk`ã€`@XXXX/utils`ï¼Œï¼ˆXXX ä»£è¡¨ä½ çš„ä»“åº“åç§°ï¼‰ï¼Œç„¶ååœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º `pnpm-workspace.yaml` æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹

```yaml
packages:
  - packages/**
  - examples
```

ç„¶ååœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º `.npmrc` æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹å†…å®¹

```
shamefully-hoist = true
```

æˆ‘ä»¬åœ¨ç¤ºä¾‹ä»¥åŠæ–‡æ¡£ä¸­ä¼šä½¿ç”¨åˆ°ç»„ä»¶ä»¥åŠå¯¹åº”æ ·å¼ï¼Œä»¥åŠç»„ä»¶å¼€å‘çš„æ—¶å€™éœ€è¦ä¸€äº›å…¬å…±çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†è¿™äº›å…¬ç”¨çš„æ·»åŠ è¿›å·¥ä½œç©ºé—´ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ‰“å¼€ bash ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼ˆ@xxx/components è¿™äº›å°±æ˜¯åˆšæ‰çš„ package.json ä¸­çš„ nameï¼‰ï¼š

```bash
pnpm i @xxx/examples -w
pnpm i @xxx/components -w
pnpm i @xxx/theme-chalk -w
pnpm i @xxx/utils -w
```

è¿™æ—¶å€™ä½ ä¼šçœ‹åˆ°æ ¹éƒ¨ `package.json` æ–‡ä»¶ä¸­ä¼šå¤šä¸‹é¢è¿™äº›ä¸œè¥¿ï¼Œè¡¨ç¤ºä½ å·²ç»æ·»åŠ è¿›å»äº†

```json
{
  "dependencies": {
    "@xxx/examples": "workspace:^",
    "@xxx/components": "workspace:^",
    "@xxx/theme-chalk": "workspace:^",
    "@xxx/utils": "workspace:^"
  }
}
```

## ç»„ä»¶ç›¸å…³çš„ä»£ç ç»“æ„

æˆ‘ä»¬åˆšæ‰è¯´äº†ï¼Œåœ¨ `components` ä¸­æ”¾ç»„ä»¶ä»£ç ï¼Œ`theme-chalk` ä¸­æ”¾ç»„ä»¶çš„æ ·å¼æ–‡ä»¶ï¼Œ`utils` ä¸­æ”¾ç»„ä»¶çš„å…¬å…±æ–¹æ³•ã€‚æˆ‘ä»¬æ¥æƒ³ä¸€ä¸‹å®‰è£… `Element Plus` ç»„ä»¶åº“åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦å¹²ä»€ä¹ˆï¼Ÿ

```js
// main.ts
import { createApp } from "vue";
import ElementPlus from "element-plus";
import "element-plus/dist/index.css";
import App from "./App.vue";

const app = createApp(App);

app.use(ElementPlus);
app.mount("#app");
```

é‡ç‚¹åœ¨äº `app.use(ElementPlus)` è¿™è¡Œä»£ç ï¼Œèƒ½è¢« Vue å®ä¾‹ `use`, è¯´æ˜"element-plus"å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå¹¶ä¸”å¯¼å‡ºçš„å¯¹è±¡ä¸­åŒ…å« `install` æ–¹æ³•ï¼Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£[å®˜æ–¹ app-use ä»‹ç»](https://cn.vuejs.org/api/application.html#app-use)ï¼Œè¿™å°±ä»£è¡¨ç€æˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„ç»„ä»¶åº“å¯¼å‡ºçš„å¯¹è±¡ä½œä¸º Vue å®ä¾‹çš„ä¸€ä¸ªæ’ä»¶ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹çœ‹ Vue å®˜æ–¹è¯´æ’ä»¶æ€ä¹ˆå®šä¹‰çš„å‘¢ï¼Ÿ[å®˜æ–¹ plugins ä»‹ç»](https://cn.vuejs.org/guide/reusability/plugins.html) å¹¶ä¸”æˆ‘ä»¬éœ€è¦é€šè¿‡æ’ä»¶å°†æˆ‘ä»¬å¼€å‘çš„ç»„ä»¶æ³¨å†Œåˆ°è¿™ä¸ªå®ä¾‹ä¸Šå»ï¼Œè¿™æ—¶å€™èªæ˜çš„å°ä¼™ä¼´å·²ç»å¤§æ¦‚çŸ¥é“æ€ä¹ˆåšäº†ï¼Œå½“ç„¶æˆ‘è¿˜æ˜¯éœ€è¦å‘Šè¯‰ä½ ä»¬ä¸€æ­¥æ­¥æ€ä¹ˆå®ç°ã€‚

å…ˆåœ¨`components`æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª `index.js` æ–‡ä»¶ï¼Œå¹¶ export å‡ºå»ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«`install`çš„ä¸€ä¸ªæ–¹æ³•ã€‚

```js
export default {
  install(app) {},
};
```

å†æƒ³æƒ³ï¼Œæˆ‘ä»¬ä½¿ç”¨`Element Plus`ï¼Œåªè¦ `use` å°±å¯ä»¥ç›´æ¥åœ¨å…¨å±€è°ƒç”¨ä»–çš„æ‰€æœ‰ç»„ä»¶ï¼Œé‚£ä»–çš„ç»„ä»¶æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™æ³¨å†Œçš„å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯åœ¨æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„è¿™ä¸ª`index.js`ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå®ƒå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­

```js
import ElButton from "./button";

export default {
  install(app) {
    app.component("el-button", ElButton);
  },
};
```

é‚£æˆ‘ä»¬ä¹Ÿæ¥å†™ä¸€ä¸ªç»„ä»¶è¯•ä¸€ä¸‹ã€‚æˆ‘ä»¬åœ¨`components`æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª`button`æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾è¿™ä¸ª button ç»„ä»¶çš„ç›¸å…³ä»£ç ï¼Œç„¶ååœ¨ä»–ä¸‹é¢åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹çš„æ–‡ä»¶ç»“æ„ï¼š

![](http://tuchuang.niubin.site/image/project-20240807-1.png)

å…¶ä¸­ vue æ–‡ä»¶å’Œ index.js çš„å†…å®¹å¦‚ä¸‹:

```vue
<template>
  <div class="t-button">
    <button>
      <slot />
    </button>
  </div>
</template>

<script setup>
defineOptions({
  name: "t-button",
});
</script>
```

```js
import Button from "./src/button.vue";

Button.install = (app) => {
  app.component(Button.name, Button);
};
export const TButton = Button;

export default TButton;
```

> âœ¨ æ€è€ƒï¼šè¿™å—ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠ›å‡º Button ç»„ä»¶ï¼Œè€Œæ˜¯ç»™å®ƒä¸Šé¢æŒ‚äº†ä¸€ä¸ª install æ–¹æ³•å† export å‘¢ï¼Ÿ

ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåœ¨`components`æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª`components.js`æ”¶é›†æ‰€æœ‰çš„ç»„ä»¶

```js
export { TButton } from "./button";
```

æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å‰é¢çš„`components`å…¥å£çš„ `index.js` æ–‡ä»¶

```js
import * as components from "./components";

export default {
  install(app) {
    Object.entries(components).forEach(([key, value]) => {
      app.component(key, value);
    });
  },
};
```

ğŸ‰OKï¼Œåˆ°è¿™æˆ‘ä»¬ç®—æ˜¯å·²ç»ç®€å•å†™å®Œäº†ä¸€ä¸ªç»„ä»¶çš„å¼€å‘ä»¥åŠæ³¨å†Œçš„é€»è¾‘ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹æˆ‘ä»¬å†™çš„è¿™ä¸ª button ç»„ä»¶èƒ½ä¸èƒ½åœ¨ vue é¡¹ç›®ä¸­ä½¿ç”¨å‘¢ï¼Ÿ

## ç»„ä»¶é¢„è§ˆ

æˆ‘ä»¬å‰é¢åˆ›å»ºäº†ä¸€ä¸ª`examples`æ–‡ä»¶å¤¹å°±æ˜¯ä¸ºäº†åˆ›å»ºæˆ‘ä»¬å¼€å‘æ—¶é¢„è§ˆå’Œæµ‹è¯•ç”¨çš„ï¼Œæˆ‘ä»¬å…ˆåœ¨æ ¹ç›®å½•ä¸‹å®‰è£…ä¸€ä¸‹ vueï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦ä½¿ç”¨ vite è¿™ä¸ªæ„å»ºå·¥å…·æ¥åˆ›å»ºä¸€ä¸ª vue é¡¹ç›®ï¼Œé‚£ä¹ˆ

```bash
pnpm i @vitejs/plugin-vue vite -D -w
```

> æ³¨æ„è¿™ä¸ª `-w` æ˜¯æ·»åŠ è¿›å·¥ä½œåŒº

æˆ‘ä»¬åœ¨`examples`æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä»¥ä¸‹æ–‡ä»¶

![](http://tuchuang.niubin.site/image/project-20240807-2.png)

æˆ‘ä»¬å…ˆé…ç½®ä¸€ä¸‹ vite è®©æ”¯æŒè§£æ vue

```js
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";

export default defineConfig({
  plugins: [vue()],
});
```

ä¿®æ”¹`package.json`ä½¿å…¶æ”¯æŒ es æ¨¡å—

```json
{
  "name": "@test-ui/examples",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "type": "module", // æ”¹ä¸ºmodule
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

ç„¶ååœ¨ html ä¸­åˆ›å»ºä¸€ä¸ª id ä¸º `app` çš„ div ä½œä¸º vue æ¸²æŸ“çš„å…¥å£ï¼Œå¹¶å¯¼å…¥ index.js æ–‡ä»¶

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <div id="app"></div>
  </body>
  <script type="module" src="./index.js"></script>
</html>
```

æˆ‘ä»¬åœ¨ `app.vue` æ–‡ä»¶ä¸­éšä¾¿å†™ä¸€å†™ä¸œè¥¿:

```vue
<template>
  <div>
    <p>1111</p>
  </div>
</template>

<script setup></script>

<style scoped></style>
```

ç„¶ååœ¨`index.js`ä¸­å†™ä¸€ä¸‹ vue çš„æ¸²æŸ“

```js
import { createApp } from "vue";
import App from "./app.vue";

const app = createApp(App);
app.mount("#app");
```

è¿™æ ·ï¼Œè¿™ä¸ª vue é¡¹ç›®ç®—æ˜¯å†™å®Œäº†ï¼Œæˆ‘ä»¬éœ€è¦åŠ å…¥å¯åŠ¨å‘½ä»¤ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹æ ¹ç›®å½•ä¸‹çš„ `package.json` æ–‡ä»¶ï¼Œæ·»åŠ å¯åŠ¨å‘½ä»¤

```json
{
  "name": "test-ui",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "dev": "vite examples", // æ·»åŠ å¯åŠ¨å‘½ä»¤
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "@test-ui/components": "workspace:^",
    "@test-ui/examples": "workspace:^"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.1.2",
    "vite": "^5.3.5"
  }
}
```

æ¥ï¼Œ`npm run dev`å¯åŠ¨ä¸€ä¸‹ï¼Œå‘ç° vue é¡¹ç›®æ˜¯æˆåŠŸå¯åŠ¨çš„ï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦å°†æˆ‘ä»¬çš„ç»„ä»¶åº“è¿›è¡Œæ³¨å†Œï¼Œçœ‹ä¸€ä¸‹åˆšæ‰çš„ button ç»„ä»¶èƒ½å¦åœ¨ vue é¡¹ç›®ä¸­æ­£å¸¸ä½¿ç”¨ã€‚

```js
import { createApp } from "vue";
import App from "./app.vue";
import TestUI from "@test-ui/components";

const app = createApp(App);
app.use(TestUI);
app.mount("#app");
```

æˆ‘ä»¬åœ¨ app.vue æ–‡ä»¶ä¸­ä½¿ç”¨ä¸€ä¸‹æ³¨å†Œçš„ button ç»„ä»¶

```vue
<template>
  <div>
    <p>1111</p>
    <t-button>222222</t-button>
  </div>
</template>

<script setup></script>

<style scoped></style>
```

![](http://tuchuang.niubin.site/image/project-20240807-3.png)

å‡ºæ¥äº†ï¼Œå¤ªæ„ŸåŠ¨äº†ã€‚
