<template>
  <div class="contribute_chart">
    <div class="chart_box" ref="chart"></div>
  </div>
</template>
<script setup lang="ts">
import * as echarts from "echarts";
import { onMounted, shallowRef } from "vue";
import dayjs from "dayjs";
import { useConfig } from "../../utils/client";

const { article } = useConfig();
console.log("article: ", article);

const today = dayjs().format("YYYY-MM-DD");
const beforeOnYear = dayjs().subtract(1, "year").format("YYYY-MM-DD");
console.log("beforeOnYear: ", beforeOnYear);

const chart = shallowRef<HTMLDivElement>();

onMounted(() => {
  const myChart = echarts.init(chart.value);
  myChart.setOption({
    tooltip: {
      formatter: function (params) {
        return `${params.value[0]} <br/> ${params.value[1]} 篇文章`;
      },
    },
    visualMap: {
      show: false,
      min: 0,
      max: 5,
      inRange: {
        color: [
          "#ebedf0",
          "#c6e48b",
          "#7bc96f",
          "#239a3b",
          "#196127",
          "#196127",
        ],
      },
    },
    calendar: {
      left: "center",
      // right: "0",
      // width: "96%",
      // height: "100%",
      itemStyle: {
        color: "#ebedf0",
        borderWidth: 5,
        borderColor: "#fff",
      },
      cellSize: [20, 20],
      range: [beforeOnYear, today],
      splitLine: true,
      dayLabel: {
        firstDay: 7,
        // nameMap: "ZH",
      },
      // monthLabel: {
      //   nameMap: [
      //     "一月",
      //     "二月",
      //     "三月",
      //     "四月",
      //     "五月",
      //     "六月",
      //     "七月",
      //     "八月",
      //     "九月",
      //     "十月",
      //     "十一月",
      //     "十二月",
      //   ],
      // },
      yearLabel: {
        show: true,
        position: "right",
      },
      silent: {
        show: false,
      },
    },
    series: {
      type: "heatmap",
      coordinateSystem: "calendar",
      itemStyle: {
        color: "#ebedf0",
      },
      data: [
        ["2023-05-17", 0],
        ["2023-05-18", 0],
        ["2023-05-19", 0],
        ["2023-05-20", 4],
        ["2023-05-21", 0],
        ["2024-02-07", 0],
        // ["2023-05-22", 0],
        // ["2023-05-23", 0],
        // ["2023-05-24", 0],
        // ["2023-05-25", 0],
        // ["2023-05-26", 1],
        // ["2023-05-27", 1],
        // ["2023-05-28", 0],
        // ["2023-05-29", 0],
        // ["2023-05-30", 0],
        // ["2023-05-31", 0],
        // ["2023-06-01", 0],
        // ["2023-06-02", 1],
        // ["2023-06-03", 1],
        // ["2023-06-04", 0],
        // ["2023-06-05", 2],
        // ["2023-06-06", 0],
        // ["2023-06-07", 0],
        // ["2023-06-08", 1],
        // ["2023-06-09", 0],
        // ["2023-06-10", 0],
        // ["2023-06-11", 0],
        // ["2023-06-12", 0],
        // ["2023-06-13", 0],
        // ["2023-06-14", 0],
        // ["2023-06-15", 0],
        // ["2023-06-16", 1],
        // ["2023-06-17", 0],
        // ["2023-06-18", 0],
        // ["2023-06-19", 0],
        // ["2023-06-20", 0],
        // ["2023-06-21", 0],
        // ["2023-06-22", 0],
        // ["2023-06-23", 0],
        // ["2023-06-24", 3],
        // ["2023-06-25", 0],
        ["2023-06-26", 3],
        // ["2023-06-27", 0],
        // ["2023-06-28", 0],
        // ["2023-06-29", 0],
        // ["2023-06-30", 0],
        // ["2023-07-01", 0],
        // ["2023-07-02", 0],
        // ["2023-07-03", 0],
        // ["2023-07-04", 0],
        // ["2023-07-05", 0],
        // ["2023-07-06", 0],
        // ["2023-07-07", 0],
        ["2023-07-08", 2],
        // ["2023-07-09", 4],
        // ["2023-07-10", 0],
        // ["2023-07-11", 0],
        // ["2023-07-12", 0],
        // ["2023-07-13", 0],
        // ["2023-07-14", 0],
        // ["2023-07-15", 0],
        // ["2023-07-16", 1],
        // ["2023-07-17", 1],
        // ["2023-07-18", 0],
        // ["2023-07-19", 0],
        // ["2023-07-20", 2],
        // ["2023-07-21", 2],
        // ["2023-07-22", 0],
        // ["2023-07-23", 1],
        // ["2023-07-24", 0],
        // ["2023-07-25", 0],
        // ["2023-07-26", 0],
        ["2023-07-27", 1],
        // ["2023-07-28", 0],
        // ["2023-07-29", 0],
        // ["2023-07-30", 0],
        // ["2023-07-31", 0],
        // ["2023-08-01", 0],
        // ["2023-08-02", 1],
        // ["2023-08-03", 0],
        // ["2023-08-04", 0],
        // ["2023-08-05", 0],
        // ["2023-08-06", 1],
        // ["2023-08-07", 2],
        // ["2023-08-08", 1],
        // ["2023-08-09", 1],
        // ["2023-08-10", 0],
        // ["2023-08-11", 1],
        // ["2023-08-12", 0],
        // ["2023-08-13", 0],
        // ["2023-08-14", 0],
        // ["2023-08-15", 1],
        // ["2023-08-16", 1],
        // ["2023-08-17", 1],
        // ["2023-08-18", 0],
        // ["2023-08-19", 0],
        // ["2023-08-20", 1],
        // ["2023-08-21", 0],
        // ["2023-08-22", 1],
        // ["2023-08-23", 4],
        // ["2023-08-24", 2],
        // ["2023-08-25", 2],
        // ["2023-08-26", 2],
        // ["2023-08-27", 5],
        // ["2023-08-28", 5],
        // ["2023-08-29", 3],
        // ["2023-08-30", 2],
        // ["2023-08-31", 3],
        // ["2023-09-01", 3],
        // ["2023-09-02", 2],
        // ["2023-09-03", 4],
        // ["2023-09-04", 4],
        // ["2023-09-05", 1],
        // ["2023-09-06", 0],
        // ["2023-09-07", 1],
        // ["2023-09-08", 1],
        // ["2023-09-09", 0],
        // ["2023-09-10", 1],
        // ["2023-09-11", 0],
        // ["2023-09-12", 0],
        // ["2023-09-13", 1],
        // ["2023-09-14", 1],
        // ["2023-09-15", 3],
        // ["2023-09-16", 1],
        // ["2023-09-17", 1],
        // ["2023-09-18", 3],
        // ["2023-09-19", 2],
        // ["2023-09-20", 0],
        // ["2023-09-21", 2],
        // ["2023-09-22", 1],
        // ["2023-09-23", 1],
        // ["2023-09-24", 0],
        // ["2023-09-25", 9],
        // ["2023-09-26", 1],
        // ["2023-09-27", 1],
        // ["2023-09-28", 0],
        // ["2023-09-29", 1],
        // ["2023-09-30", 1],
        // ["2023-10-01", 1],
        // ["2023-10-02", 1],
        // ["2023-10-03", 0],
        // ["2023-10-04", 0],
        // ["2023-10-05", 1],
        // ["2023-10-06", 0],
        // ["2023-10-07", 3],
        // ["2023-10-08", 0],
        // ["2023-10-09", 1],
        // ["2023-10-10", 0],
        // ["2023-10-11", 2],
        // ["2023-10-12", 1],
        // ["2023-10-13", 2],
        // ["2023-10-14", 0],
        // ["2023-10-15", 4],
        // ["2023-10-16", 1],
        // ["2023-10-17", 1],
        // ["2023-10-18", 1],
        // ["2023-10-19", 0],
        // ["2023-10-20", 1],
        // ["2023-10-21", 0],
        // ["2023-10-22", 3],
        // ["2023-10-23", 1],
        // ["2023-10-24", 0],
        // ["2023-10-25", 1],
        // ["2023-10-26", 3],
        // ["2023-10-27", 3],
        // ["2023-10-28", 1],
        // ["2023-10-29", 1],
        // ["2023-10-30", 2],
        // ["2023-10-31", 1],
        // ["2023-11-01", 0],
        // ["2023-11-02", 0],
        // ["2023-11-03", 0],
        // ["2023-11-04", 0],
        // ["2023-11-05", 1],
        // ["2023-11-06", 1],
        // ["2023-11-07", 0],
        // ["2023-11-08", 2],
        // ["2023-11-09", 0],
        // ["2023-11-10", 3],
        // ["2023-11-11", 1],
        // ["2023-11-12", 0],
        // ["2023-11-13", 4],
        // ["2023-11-14", 2],
        // ["2023-11-15", 0],
        // ["2023-11-16", 0],
        // ["2023-11-17", 6],
        // ["2023-11-18", 0],
        // ["2023-11-19", 1],
        // ["2023-11-20", 2],
        // ["2023-11-21", 0],
        // ["2023-11-22", 0],
        // ["2023-11-23", 0],
        // ["2023-11-24", 0],
        // ["2023-11-25", 0],
        // ["2023-11-26", 0],
        // ["2023-11-27", 1],
        // ["2023-11-28", 0],
        // ["2023-11-29", 0],
        // ["2023-11-30", 1],
        // ["2023-12-01", 0],
        // ["2023-12-02", 0],
        // ["2023-12-03", 0],
        // ["2023-12-04", 0],
        // ["2023-12-05", 0],
        // ["2023-12-06", 0],
        // ["2023-12-07", 0],
        // ["2023-12-08", 0],
        // ["2023-12-09", 0],
        // ["2023-12-10", 0],
        // ["2023-12-11", 0],
        // ["2023-12-12", 0],
        // ["2023-12-13", 2],
        // ["2023-12-14", 1],
        // ["2023-12-15", 0],
        // ["2023-12-16", 2],
        // ["2023-12-17", 0],
        // ["2023-12-18", 0],
        // ["2023-12-19", 1],
        // ["2023-12-20", 0],
        // ["2023-12-21", 1],
        // ["2023-12-22", 0],
        // ["2023-12-23", 0],
        // ["2023-12-24", 0],
        // ["2023-12-25", 0],
        // ["2023-12-26", 0],
        // ["2023-12-27", 0],
        // ["2023-12-28", 2],
        // ["2023-12-29", 0],
        // ["2023-12-30", 0],
        // ["2023-12-31", 0],
        // ["2023-01-01", 2],
        // ["2023-01-02", 0],
        // ["2023-01-03", 0],
        // ["2023-01-04", 0],
        // ["2023-01-05", 0],
        // ["2023-01-06", 0],
        // ["2023-01-07", 0],
        // ["2023-01-08", 0],
        // ["2023-01-09", 0],
        // ["2023-01-10", 0],
        // ["2023-01-11", 2],
        // ["2023-01-12", 0],
        // ["2023-01-13", 0],
        // ["2023-01-14", 0],
        // ["2023-01-15", 0],
        // ["2023-01-16", 0],
        // ["2023-01-17", 3],
        // ["2023-01-18", 4],
        // ["2023-01-19", 1],
        // ["2023-01-20", 2],
        // ["2023-01-21", 3],
        // ["2023-01-22", 2],
        // ["2023-01-23", 0],
        // ["2023-01-24", 0],
        // ["2023-01-25", 0],
        // ["2023-01-26", 1],
        // ["2023-01-27", 2],
        // ["2023-01-28", 1],
        // ["2023-01-29", 2],
        // ["2023-01-30", 0],
        // ["2023-01-31", 0],
        // ["2023-02-01", 2],
        // ["2023-02-02", 1],
        // ["2023-02-03", 2],
        // ["2023-02-04", 2],
        // ["2023-02-05", 0],
        // ["2023-02-06", 0],
        // ["2023-02-07", 2],
        // ["2023-02-08", 1],
        // ["2023-02-09", 3],
        // ["2023-02-10", 1],
        // ["2023-02-11", 0],
        // ["2023-02-12", 1],
        // ["2023-02-13", 1],
        // ["2023-02-14", 0],
        // ["2023-02-15", 0],
        // ["2023-02-16", 1],
        // ["2023-02-17", 0],
      ],
    },
  });
});
</script>
<style lang="less" scoped>
.contribute_chart {
  width: 100%;
  height: 260px;
  .chart_box {
    margin: auto;
    width: 100%;
    height: 100%;
  }
}
</style>
